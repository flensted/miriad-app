#!/bin/bash
# Git credential helper that uses GITHUB_TOKEN from environment
# Used by git for HTTPS authentication to GitHub
#
# When git needs credentials, it calls this script.
# For "get" operation, we output the token.

# Git calls credential helpers with operation as first arg
# We only need to handle the implicit "get" case (no arg or via GIT_ASKPASS)

# When used as GIT_ASKPASS, git passes a prompt like "Password for 'https://github.com': "
# We just output the token
if [ -n "$GITHUB_TOKEN" ]; then
    echo "$GITHUB_TOKEN"
else
    echo "error: GITHUB_TOKEN not set" >&2
    exit 1
fi
